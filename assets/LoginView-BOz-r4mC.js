import{r,c as i,a as s,e as m,h as g,g as f,v as d,j as w,k as v,i as k,l as C,m as x,o as p,p as _}from"./index-CKP73aLW.js";import{a as b}from"./index-NIGUFBhG.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const y={id:"loginPage",class:"bg-yellow"},V={class:"conatiner loginPage vhContainer"},$={class:"formControls"},I={key:0},L="https://todolist-api.hexschool.io",T={__name:"LoginView",setup(N){const u=k("$swal"),e=r({email:"",password:""}),l=r({email:"",nickname:"",password:"",token:""}),c=async()=>{try{const t=await b.post(`${L}/users/sign_in`,e.value);console.log("signIn",t);const{token:o,expired:n}=t.data;document.cookie=`customTodoToken=${o}; expires=${new Date(n*1e3).toUTCString()}`,l.value=t.data,u("登入成功",`歡迎回來 ${l.value.nickname}`,"success"),C.push("/")}catch(t){x.error(t.response.data.message,{autoClose:2e3})}};return(t,o)=>{const n=v("RouterLink");return p(),i("div",y,[s("div",V,[o[8]||(o[8]=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),s("div",null,[s("form",$,[o[4]||(o[4]=s("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),o[5]||(o[5]=s("label",{class:"formControls_label",for:"email"},"Email",-1)),m(s("input",{class:"formControls_input",type:"text",id:"email","onUpdate:modelValue":o[0]||(o[0]=a=>e.value.email=a),name:"email",placeholder:"請輸入 email",required:""},null,512),[[d,e.value.email]]),e.value.email?g("",!0):(p(),i("span",I,"此欄位不可留空")),o[6]||(o[6]=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),m(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd","onUpdate:modelValue":o[1]||(o[1]=a=>e.value.password=a),placeholder:"請輸入密碼",required:""},null,512),[[d,e.value.password]]),s("input",{class:"formControls_btnSubmit",type:"button",onClick:o[2]||(o[2]=a=>c()),value:"登入"}),o[7]||(o[7]=s("a",{href:"#register"},null,-1)),f(n,{class:"formControls_btnLink",to:"/register"},{default:w(()=>[...o[3]||(o[3]=[_("註冊帳號",-1)])]),_:1})])])])])}}},q=h(T,[["__scopeId","data-v-240f4483"]]);export{q as default};
