import{c as u,o as r,a as e,n as p,t as f,w as h,r as v,b as k,i as I,u as B,d as T,e as N,v as O,F as E,f as V,g as A}from"./index-BVVe0h6L.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as L}from"./index-NIGUFBhG.js";const M="/hexschool-vuejs-hw-todolist-final-v2/assets/nolist-NGMfK5mZ.svg",R={class:"todo-item"},S={class:"todoList_label"},z=["checked"],D={__name:"TodoItem",props:{id:Number,name:String,completed:{type:Boolean,default:!1}},emits:["emitFinishFromList","emitRemoveItem"],setup(n,{emit:m}){const a=m,c=()=>{a("emitFinishFromList",{id:n.id,name:n.name,completed:n.completed})},g=()=>{console.log("removeTodo id:",n.id),a("emitRemoveItem",n.id)};return(i,d)=>(r(),u("div",R,[e("li",null,[e("label",S,[e("input",{class:"todoList_input",type:"checkbox",checked:n.completed,onChange:c},null,40,z),e("span",{class:p({"completed-text":n.completed})},f(n.name),3)]),e("span",{onClick:h(g,["stop"]),class:"remove-button"},"X")])]))}},U=x(D,[["__scopeId","data-v-8e383d83"]]),j={id:"todoListPage",class:"bg-half"},H={class:"todo_sm"},P={href:"#"},G={class:"conatiner todoListPage vhContainer"},K={class:"todoList_Content"},X={class:"inputBox"},Z={key:0,class:"todoList_list"},q={class:"todoList_tab"},J={class:"todoList_items"},Q={class:"todoList_statistics"},W={key:1},$="https://todolist-api.hexschool.io",Y={__name:"HomeView",setup(n){const m=I("$swal"),a=B(),c=v({});k(async()=>{const o=document.cookie.replace(/(?:(?:^|.*;\s*)customTodoToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(!o){m("請先登入","To continue","info"),a.push("/login");return}console.log("Token:",o);try{const t=await L.get(`${$}/users/checkout`,{headers:{Authorization:o}});console.log("Token is valid",t),c.value=t.data,console.log("User data:",c.value)}catch(t){m("您未曾登入此網站","請登入系統",t),a.push("/login")}});const g=()=>{try{const o=L.post(`${$}/users/sign_out`,{},{headers:{Authorization:document.cookie.replace(/(?:(?:^|.*;\s*)customTodoToken\s*\=\s*([^;]*).*$)|^.*$/,"$1")}});console.log("signOut",o),m("已登出",`Bye~~ ${c.value.nickname}`,"success"),a.push("/login")}catch(o){alert("Error Sign Out: ",o),a.push("/login")}},i=v("all"),d=v("");function _(o){i.value=o}const y=()=>{alert(`Add todo: ${d.value}`),s.value.push({id:s.value.length+1,name:d.value,completed:!1}),d.value=""},C=o=>{const t=s.value.find(l=>l.id===o.id);t&&(t.completed=!o.completed)},b=o=>{s.value=s.value.filter(t=>t.id!==o)},s=v([{id:1,name:"把冰箱發霉的檸檬拿去丟",completed:!0},{id:2,name:"打電話叫媽媽匯款給我",completed:!1},{id:3,name:"整理電腦資料夾",completed:!1},{id:4,name:"繳電費水費瓦斯費",completed:!1},{id:5,name:"約vicky禮拜三泡溫泉",completed:!1},{id:6,name:"約ada禮拜四吃晚餐",completed:!1}]),w=T(()=>i.value==="all"?s.value:i.value==="pending"?s.value.filter(o=>o.completed===!1):i.value==="completed"?s.value.filter(o=>o.completed===!0):s.value),F=T(()=>s.value.filter(o=>o.completed===!0).length);return k(()=>{console.log("Component mounted!")}),(o,t)=>(r(),u("div",j,[e("nav",null,[t[4]||(t[4]=e("h1",null,[e("a",{href:"#"},"ONLINE TODO LIST")],-1)),e("ul",null,[e("li",H,[e("a",P,[e("span",null,f(c.value.nickname)+"的代辦",1)])]),e("li",null,[e("a",{onClick:g,href:"#login"},"登出")])])]),e("div",G,[e("div",K,[e("div",X,[N(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),placeholder:"請輸入待辦事項"},null,512),[[O,d.value]]),e("a",{href:"#",onClick:y},[...t[5]||(t[5]=[e("i",{class:"fa fa-plus"},"+",-1)])])]),e("p",null,"current input: "+f(d.value),1),s.value.length>0?(r(),u("div",Z,[e("ul",q,[e("li",null,[e("a",{href:"#",onClick:t[1]||(t[1]=h(l=>_("all"),["prevent"])),class:p({active:i.value==="all"})},"全部",2)]),e("li",null,[e("a",{href:"#",onClick:t[2]||(t[2]=h(l=>_("pending"),["prevent"])),class:p({active:i.value==="pending"})},"待完成",2)]),e("li",null,[e("a",{href:"#",onClick:t[3]||(t[3]=h(l=>_("completed"),["prevent"])),class:p({active:i.value==="completed"})},"已完成",2)])]),e("div",J,[(r(!0),u(E,null,V(w.value,l=>(r(),u("ul",{class:"todoList_item",key:l.id},[A(U,{id:l.id,name:l.name,completed:l.completed,onEmitFinishFromList:C,onEmitRemoveItem:b},null,8,["id","name","completed"])]))),128)),e("div",Q,[e("p",null,f(s.value.length-F.value)+" 個待完成項目",1)])])])):(r(),u("div",W,[...t[6]||(t[6]=[e("p",null,"目前尚無待辦事項",-1),e("img",{src:M,alt:""},null,-1)])]))])])]))}},se=x(Y,[["__scopeId","data-v-b6a94704"]]);export{se as default};
