import{r as m,c as d,a as s,e as l,h as w,v as n,t as v,m as u,o as p}from"./index-TRLYh08T.js";import{a as g}from"./index-NIGUFBhG.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const c=g.create({baseURL:"https://todolist-api.hexschool.io",headers:{"Content-Type":"application/json"}});c.interceptors.request.use(r=>{const e=document.cookie.replace(/(?:(?:^|.*;\s*)customTodoToken\s*=\s*([^;]*).*$)|^.*$/,"$1");return e&&(r.headers.Authorization=`Bearer ${e}`),r});const b=async(r,e,a)=>await c.post("/users/sign_up",{email:r,password:a,nickname:e}),k={id:"signUpPage",class:"bg-yellow"},y={class:"conatiner signUpPage vhContainer"},x={class:"formControls",action:"index.html"},_={key:0,class:"formControls_error"},h={__name:"RegisterView",setup(r){const e=m({email:"",nickname:"",password:"",confirmPassword:""}),a=m(""),f=async()=>{if(e.value.password!==e.value.confirmPassword){a.value="密碼不一致，請重新輸入",u.error("密碼不一致，請重新輸入",{autoClose:2e3});return}a.value="";try{await b(e.value.email,e.value.nickname,e.value.password),console.log("signUp","註冊成功"),document.cookie=`customTodoToken=${response.data.token}`,setTimeout(()=>{window.location.href="#/"},1e3)}catch(i){u.error(i.response.data.message,{autoClose:2e3})}};return(i,o)=>(p(),d("div",k,[s("div",y,[o[10]||(o[10]=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),s("div",null,[s("form",x,[o[4]||(o[4]=s("h2",{class:"formControls_txt"},"註冊帳號",-1)),o[5]||(o[5]=s("label",{class:"formControls_label",for:"email"},"Email",-1)),l(s("input",{class:"formControls_input",type:"text",id:"email","onUpdate:modelValue":o[0]||(o[0]=t=>e.value.email=t),name:"email",placeholder:"請輸入 email",required:""},null,512),[[n,e.value.email]]),o[6]||(o[6]=s("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),l(s("input",{class:"formControls_input",type:"text",name:"name",id:"name","onUpdate:modelValue":o[1]||(o[1]=t=>e.value.nickname=t),placeholder:"請輸入您的暱稱"},null,512),[[n,e.value.nickname]]),o[7]||(o[7]=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),l(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd","onUpdate:modelValue":o[2]||(o[2]=t=>e.value.password=t),placeholder:"請輸入密碼",required:""},null,512),[[n,e.value.password]]),o[8]||(o[8]=s("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1)),l(s("input",{class:"formControls_input",type:"password",name:"confirmPwd",id:"confirmPwd","onUpdate:modelValue":o[3]||(o[3]=t=>e.value.confirmPassword=t),placeholder:"請再次輸入密碼",required:""},null,512),[[n,e.value.confirmPassword]]),a.value?(p(),d("span",_,v(a.value),1)):w("",!0),s("input",{class:"formControls_btnSubmit",type:"button",onClick:f,value:"註冊帳號"}),o[9]||(o[9]=s("a",{class:"formControls_btnLink",href:"#login"},"登入",-1))])])])]))}},T=C(h,[["__scopeId","data-v-2a79aac0"]]);export{T as default};
